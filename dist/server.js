(()=>{var e={459:(e,t,r)=>{"use strict";var n=r(704);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,a){if(a!==n){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},216:(e,t,r)=>{e.exports=r(459)()},704:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("express");var t=r.n(e);const n=require("react");var i=r.n(n);const o=require("react-dom/server"),a=(require("path"),require("react-dnd"));function l(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(216);var d="tile",v=function(e){var t=u((0,a.useDrop)({accept:d,collect:function(e){return{canDrop:e.canDrop(),isOver:e.isOver()}},drop:function(t,r){return{thing:e.address}}}),2),r=t[0],n=r.canDrop,o=r.isOver,l=t[1],c="#fff";return n&&o?c="darkgreen":n&&(c="darkkhaki"),i().createElement("span",{ref:l,style:{width:"40px",height:"40px",display:"inline-flex",justifyContent:"center",alignItems:"center",border:"1px solid black",backgroundColor:c}},e.children)},f=function(e){var t=u((0,a.useDrop)({accept:d,collect:function(e){return{canDrop:e.canDrop(),isOver:e.isOver()}},drop:function(t,r){return console.log("chops "+e.idx),{idx:e.idx,player:e.player}}}),2),r=t[0],n=r.canDrop,o=r.isOver,l=t[1],c="#fff";return n&&o?c="darkgreen":n&&(c="darkkhaki"),i().createElement("span",{ref:l,style:{width:"40px",height:"40px",display:"inline-flex",backgroundColor:c}},e.children)},y=function(e){var t,r=e.board,o=e.myRack,a=e.setMyRack,l=e.setBoard,s=e.setCurrentBoardState,p=e.player,d=e.gameBoard,v=u((0,n.useState)(!1),2);return v[0],v[1],i().createElement(i().Fragment,null,i().createElement(m,{board:r,setBoard:l,rack:o,setRack:a,gameBoard:d}),i().createElement(k,(c(t={player:p,myRack:o,setMyRack:a},"player",p),c(t,"board",r),c(t,"setBoard",l),c(t,"setCurrentBoardState",s),t)))},g=function(e){var t=e.gameBoard,r=e.updateGameBoard;return t.map((function(e,n){return i().createElement("div",{style:{display:"flex",position:"relative",left:"400px",top:"150px"}},e.map((function(e,o){return i().createElement(b,{key:"1".concat(n).concat(o),board:t,setBoard:r,address:[n,o],piece:e},e.value)})))}))},m=function(e){var t=e.board,r=e.setBoard,n=e.rack,o=e.setRack,a=e.gameBoard;return t.map((function(e,l){return i().createElement("div",{style:{display:"flex"}},e.map((function(e,c){return"x"===a[l][c].value?e.isActive?i().createElement(b,{key:"".concat(l).concat(c),board:t,setBoard:r,address:[l,c],rack:n,setRack:o,piece:e},e.value):i().createElement(v,{key:"".concat(l).concat(c),address:[l,c]},e.value):i().createElement(h,{key:"".concat(l).concat(c),address:[l,c],piece:e},e.value)})))}))},h=function(e){return i().createElement("span",{style:{width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid black"}},e.children)},b=function(e){var t=u((0,a.useDrag)({item:{type:d,value:e.piece,address:e.address},begin:function(t){var r=Object.assign({},e.piece),n=l(e.board);return n[e.address[0]][e.address[1]].value="x",n[e.address[0]][e.address[1]].isActive=!1,console.log(r),{piece:r,newBoard:n}},end:function(t,n){console.log("hello");var i=n.getDropResult();if(t&&i){console.log("In CellTile: ".concat(JSON.stringify(t)," - ").concat(JSON.stringify(i)));var o=l(t.newBoard);if(console.log("14"+JSON.stringify(e)+"123 "+JSON.stringify(r)+"1234 "+JSON.stringify(t)),i.idx){console.log("12 ".concat(JSON.stringify(t)));var a=l(e.rack);a[i.idx]=t.piece.value,e.setRack(i.player,a)}else i.thing&&(o[i.thing[0]][i.thing[1]].value=t.piece.value,o[i.thing[0]][i.thing[1]].isActive=!0);e.setBoard(o)}}}),2),r=t[0],n=t[1];return i().createElement("span",{ref:n,style:{width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid black"}},e.children)};Array.prototype.insert=function(e,t){this.splice(e,0,t)};var x=function(e){var t=u((0,a.useDrag)({item:{type:d,value:e.children,index:e.idx},end:function(t,r){var n=r.getDropResult();if(t&&n)if(console.log("".concat(JSON.stringify(t)," - ").concat(JSON.stringify(n))),n.thing){var i=l(e.board);i[n.thing[0]][n.thing[1]].value=t.value,i[n.thing[0]][n.thing[1]].isActive=!0,e.setBoard(i);var o=l(e.myRack);o[e.idx]="Cell",e.setMyRack(e.player,o)}else{var a=l(e.myRack);a.map((function(e){console.log("s "+e)}));var c=a.splice(t.index,1);console.log("fire"+c),a.insert(n.idx,c),console.log(e.myRack),console.log(a),e.setMyRack(e.player,a)}}}),2),r=(t[0],t[1]),n=u((0,a.useDrop)({accept:d,collect:function(e){return{canDrop:e.canDrop(),isOver:e.isOver()}},hover:function(e,t){console.log("hovr ")},drop:function(t,r){return console.log("poop"+JSON.stringify(t)),{idx:e.idx}}}),2),o=n[0],c=o.canDrop,s=o.isOver,p=n[1],v="#fff";return c&&s?v="darkgreen":c&&(v="lightblue"),i().createElement("span",{ref:function(e){r(e),p(e)},style:{width:"40px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid black",backgroundColor:v}},e.children)},k=function(e){var t=e.board,r=e.setBoard,n=e.myRack,o=e.setMyRack,a=e.setCurrentBoardState,l=e.player;return i().createElement("div",{style:{marginTop:"50px",display:"flex"}},n.map((function(e,c){return console.log("building rack "+e),"Cell"===e?i().createElement(f,{key:c,idx:c,player:l}):i().createElement(x,{key:c,player:l,board:t,setBoard:r,myRack:n,setMyRack:o,idx:c,setCurrentBoardState:a},e)})))};const M=function(){var e=u((0,n.useState)([{score:0,rack:[],key:"1"},{score:0,rack:[],key:"2"}]),2),t=e[0],r=e[1],o=u((0,n.useState)(!1),2),a=(o[0],o[1],u((0,n.useState)([[{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"}],[{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"}],[{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"}]]),2)),c=a[0],s=a[1],p=u((0,n.useState)([[{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"}],[{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"}],[{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"},{value:"x",isActive:!1,positionMultiplier:"1",rowMultiplier:"1"}]]),2),d=p[0],v=p[1],f=u((0,n.useState)(l(d)),2),m=f[0],h=f[1],b=u((0,n.useState)({A:{letter:"A",count:9,value:1},B:{letter:"B",count:2,value:3},C:{letter:"C",count:2,value:3},D:{letter:"D",count:4,value:2},E:{letter:"E",count:12,value:1},F:{letter:"F",count:2,value:4},G:{letter:"G",count:3,value:3},H:{letter:"H",count:2,value:2},I:{letter:"I",count:9,value:1},J:{letter:"J",count:1,value:8},K:{letter:"K",count:1,value:5},L:{letter:"L",count:4,value:1},M:{letter:"M",count:3,value:3},N:{letter:"N",count:6,value:1},O:{letter:"O",count:8,value:1},P:{letter:"P",count:2,value:3},Q:{letter:"Q",count:1,value:10},R:{letter:"R",count:6,value:1},S:{letter:"S",count:4,value:1},T:{letter:"T",count:6,value:1},U:{letter:"U",count:4,value:1},V:{letter:"V",count:2,value:4},W:{letter:"W",count:2,value:4},X:{letter:"X",count:1,value:10},Y:{letter:"Y",count:2,value:4},Z:{letter:"Z",count:1,value:10},Blank:{letter:"",count:2,value:0}}),2),x=b[0],k=b[1],M=function(){return Math.floor(27*Math.random())},O=function(e,n){var i=l(t);i[e].rack=n,r(i)},S=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Blank"],E=function(){for(var e=M();x[S[e]].count<=0;)e=M();var t=Object.assign({},x),r=t[S[e]];return r.count=r.count-1,k(t),r.letter};(0,n.useEffect)((function(){console.log(c),t.forEach((function(e,n){!function(e,n){for(var i=[],o=0;o<7;o++)i.push(E());var a=l(t);console.log("".concat(n," ").concat(JSON.stringify(a[n]))),a[n].rack=i,r(a),console.log(t)}(0,n)}))}),[]);return i().createElement("div",null,i().createElement(g,{gameBoard:c,setGameBoard:s}),t.map((function(e,r){return i().createElement("div",{key:r},i().createElement(y,{player:r,board:d,myRack:e.rack,setMyRack:O,setBoard:v,setCurrentBoardState:h,gameBoard:c}),i().createElement("button",{onClick:function(){v(m)}},"refresh board"),i().createElement("button",{onClick:function(){return function(e){for(var r,n=[],i=l(t)[e].rack,o=0;o<7;o++)"Cell"!==i[o]&&(n.push(i[o]),console.log("adding"+i[o]));for(;n.length<7;)n.push(E());O(e,n),h(l(d)),r=l(c),console.log("gravy"+JSON.stringify(d)),c.map((function(e,t){e.map((function(e,n){"x"==c[t][n].value&&(r[t][n]=JSON.parse(JSON.stringify(d[t][n])))}))})),s(l(r))}(r)}},"click"))})))},O=require("react-dnd-html5-backend");var S=t()();S.use(t().static("dist/public")),console.log("path :"+__dirname+"/dist/public"),S.get("/",(function(e,t){var r,n=(r=(0,o.renderToString)(i().createElement(a.DndProvider,{backend:O.HTML5Backend},i().createElement(M,null))),'\n    <!DOCTYPE html>\n    <html>\n        <head>\n            <meta charset="UTF-8">\n           \n        </head>\n        <body>\n            <div id="app">'.concat(r,'</div>\n            \n            <script src="/bund.js"><\/script>\n        </body>\n    </html>'));t.send(n)})),S.listen(3e3,(function(){console.log("Listening on port 3000")}))})()})();